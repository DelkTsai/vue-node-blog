{"version":3,"sources":["webpack:///./src/store/actions.js","webpack:///./src/store/state.js","webpack:///./src/store/getters.js","webpack:///./src/store/mutation-types.js","webpack:///./src/store/mutations.js","webpack:///./src/store/index.js","webpack:///src/base/popup.vue","webpack:///./src/base/popup.vue?e599","webpack:///./src/base/popup.vue","webpack:///src/components/formPopup/formPopup.vue","webpack:///./src/components/formPopup/formPopup.vue?dfbd","webpack:///./src/components/formPopup/formPopup.vue","webpack:///src/App.vue","webpack:///./src/App.vue?c7ba","webpack:///./src/App.vue","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/api/sign.js","webpack:///./src/common/js/util.js","webpack:///./src/common/js/axios.js","webpack:///./src/api/user.js"],"names":["setSignPopup","_ref","type","commit","SET_SIGN_POPUP","SET_SIGN_TYPE","saveUserInfo","_ref2","_ref3","user","loginState","SET_LOGIN_STATE","SET_USER_INFO","store_state","isLogin","document","cookie","indexOf","showSignPopup","signType","isPopState","state","getters_user","store_mutations","mutations","defineProperty_default","_mutations","arguments","length","undefined","popState","vue_esm","use","vuex_esm","__webpack_exports__","Store","getters","getters_namespaceObject","actions","actions_namespaceObject","popup","String","Boolean","hide","base_popup","render","_h","this","$createElement","_c","_self","attrs","name","directives","rawName","value","expression","staticClass","on","click","coverClick","style","width","$event","stopPropagation","_t","_v","_s","title","_e","describe","cancel","confirmBtn","confirm","staticRenderFns","src_base_popup","__webpack_require__","normalizeComponent","ssrContext","formPopup","show","methods","extends_default","form","repassword","_this","currentType","then","data","redirect","close","reload","msg","catch","err","Object","signin","signup","formPopup_formPopup","ref","coverClickHide","info","_l","item","placeholder","submitChecked","submitText","tipsinfo","toggleType","_githubLogin","components_formPopup_formPopup","formPopup_normalizeComponent","App","computed","_getUserInfo","console","log","_this2","selectortype_template_index_0_src_App","_vm","id","!click","shouldCheckLoigin","src_App","App_normalizeComponent","CommonHeader","e","bind","FooterMenu","PostEdit","Promise","all","PostView","UserPost","vue_router_esm","window","addEventListener","store","router","mode","scrollBehavior","to","from","savedPosition","x","y","routes","path","components","default","header","footer","meta","shouldLogin","component","beforeEach","next","dispatch","fullPath","query","src_router","config","productionTip","mixin","intoPageCount","promise_default","a","prototype","finally","callback","P","constructor","resolve","reason","el","template","password","__WEBPACK_IMPORTED_MODULE_0__common_js_axios__","post","url","__WEBPACK_IMPORTED_MODULE_1__common_js_util__","location","href","get","str","replace","key","result","search","match","RegExp","split","decodeURIComponent","dateStr","dateTime","Date","getTime","time","index","timeFormatArr","findIndex","timeUnit","fmt","date","o","M+","getMonth","d+","getDate","h+","getHours","m+","getMinutes","s+","getSeconds","q+","Math","floor","S","getMilliseconds","test","$1","getFullYear","substr","k","fn","context","timer","_len","args","Array","_key","clearTimeout","setTimeout","apply","concat","delay","windowH","innerHeight","docH","documentElement","scrollHeight","body","scrollTop","isDev","ERR_OK","unLogin","Number","MAX_VALUE","__WEBPACK_IMPORTED_MODULE_3__util__","__WEBPACK_IMPORTED_MODULE_1_axios___default","defaults","baseURL","withCredentials","headers","interceptors","response","code","__WEBPACK_IMPORTED_MODULE_2__store__","error","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","reject","userInfo","Content-Type"],"mappings":"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","file":"static/js/app.57113af7bcb808b99b45.js","sourcesContent":["import * as types from './mutation-types'\n\n// 设置弹窗显示及类型\nexport function setSignPopup({commit}, type) {\n    commit(types.SET_SIGN_POPUP)\n    commit(types.SET_SIGN_TYPE, type)\n}\n\n// 保存用户信息和登录状态\nexport function saveUserInfo({commit}, {user, loginState}) {\n    commit(types.SET_LOGIN_STATE, loginState)\n    commit(types.SET_USER_INFO, user)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions.js","const state = {\n    isLogin: document.cookie.indexOf('vue_node_blog') > -1,\n    showSignPopup: false,\n    signType: 'signin', // 弹窗类型，登录或注册\n    user: null,\n    isPopState: false, // 浏览器的前进后退，是前进后退就不获取数据，是点击就重置组件状态并获取数据\n}\n\nexport default state\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/state.js","export const isLogin = state => state.isLogin\n\nexport const showSignPopup = state => state.showSignPopup\n\nexport const signType = state => state.signType\n\nexport const user = state => state.user\n\nexport const isPopState = state => state.isPopState\n\n\n// WEBPACK FOOTER //\n// ./src/store/getters.js","export const SET_LOGIN_STATE = 'SET_LOGIN_STATE'\n\nexport const SET_SIGN_POPUP = 'SET_SIGN_POPUP'\n\nexport const SET_SIGN_TYPE = 'SET_SIGN_TYPE'\n\nexport const SET_USER_INFO = 'SET_USER_INFO'\n\nexport const SET_POP_STATE = 'SET_POP_STATE'\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutation-types.js","import * as types from './mutation-types'\n\nconst mutations = {\n    [types.SET_LOGIN_STATE](state, loginState) {\n        state.isLogin = loginState\n    },\n    [types.SET_SIGN_POPUP](state) {\n        state.showSignPopup = !state.showSignPopup\n    },\n    [types.SET_SIGN_TYPE](state, type = 'signin') {\n        state.signType = type\n    },\n    [types.SET_USER_INFO](state, user) {\n        state.user = user\n    },\n    [types.SET_POP_STATE](state, popState) {\n        state.isPopState = popState\n    }\n}\n\nexport default mutations\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutations.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport state from './state'\nimport * as getters from './getters'\nimport mutations from './mutations'\nimport * as actions from './actions'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state,\n    getters,\n    mutations,\n    actions\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","<template>\n    <transition name=\"fade\">\n        <div class=\"popup-wrapper\" v-show=\"state\" @click=\"coverClick\">\n            <div class=\"content\" @click.stop=\"\" :style=\"{width}\">\n                <slot>\n                    <h3 class=\"title\" v-if=\"title\">{{title}}</h3>\n                    <p class=\"describe\" v-if=\"describe\">{{describe}}</p>\n                    <div class=\"footer\">\n                        <span class=\"btn\" @click=\"hide\">{{cancel}}</span>\n                        <span class=\"btn\" @click=\"confirmBtn\">{{confirm}}</span>\n                    </div>\n                </slot>\n            </div>\n        </div>\n    </transition>\n</template>\n\n<script>\n    export default {\n        name: 'basePopup',\n        props: {\n            title: {\n                type: String,\n                default: ''\n            },\n            describe: {\n                type: String,\n                default: ''\n            },\n            cancel: {\n                type: String,\n                default: '取消'\n            },\n            confirm: {\n                type: String,\n                default: '确定'\n            },\n            coverClickHide: { // 点击背景是否隐藏弹窗，主要是在异步提交时禁用点击背景隐藏\n                type: Boolean,\n                default: true\n            },\n            width: {\n                type: String,\n                default: '70%'\n            }\n        },\n        data() {\n            return {\n                state: false,\n            }\n        },\n        methods: {\n            show() {\n                this.state = true\n            },\n            hide() {\n                this.state = false\n            },\n            confirmBtn() {\n                this.hide()\n                this.$emit('confirm')\n            },\n            coverClick() {\n                this.coverClickHide && this.hide()\n                this.$emit('coverClick')\n            }\n        }\n    }\n</script>\n\n<style lang=\"stylus\" scoped>\n    .popup-wrapper\n        position fixed\n        top 0\n        left 0\n        right 0\n        bottom 0\n        z-index 99\n        background-color rgba(120, 120, 120, 0.4)\n        display flex\n        align-items center\n        .content\n            position relative\n            width 70%\n            margin 0 auto\n            background-color #ffffff\n            border-radius 5px\n            overflow hidden\n            text-align center\n            padding-top 20px\n            .title\n                color #333333\n                font-size 18px\n                margin-bottom 15px\n                padding 0 15px\n            .describe\n                color #999\n                font-size 16px\n                margin-bottom 15px\n                padding 0 15px\n                word-break break-all\n            .footer\n                display flex\n                border-top 0.5px solid #cccccc\n                .btn\n                    font-size 16px\n                    color #696969\n                    flex 1\n                    padding 7px 0\n                .btn + .btn\n                    border-left 0.5px solid #cccccc\n\n    animateTime = 0.3s\n    .fade-enter-active, .fade-leave-active\n        transition all animateTime\n        .content\n            animation scale animateTime ease\n    .fade-enter, .fade-leave-to\n        opacity 0\n\n    @keyframes scale {\n        0% {\n            transform scale(0)\n        }\n\n        60% {\n            transform scale(1.1)\n        }\n\n        100% {\n            transform scale(1)\n        }\n    }\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/base/popup.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state),expression:\"state\"}],staticClass:\"popup-wrapper\",on:{\"click\":_vm.coverClick}},[_c('div',{staticClass:\"content\",style:({width: _vm.width}),on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._t(\"default\",[(_vm.title)?_c('h3',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]):_vm._e(),_vm._v(\" \"),(_vm.describe)?_c('p',{staticClass:\"describe\"},[_vm._v(_vm._s(_vm.describe))]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[_c('span',{staticClass:\"btn\",on:{\"click\":_vm.hide}},[_vm._v(_vm._s(_vm.cancel))]),_vm._v(\" \"),_c('span',{staticClass:\"btn\",on:{\"click\":_vm.confirmBtn}},[_vm._v(_vm._s(_vm.confirm))])])])],2)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.6.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-f438767c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.6.0@vue-loader/lib/selector.js?type=template&index=0!./src/base/popup.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.6.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f438767c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.6.0@vue-loader/lib/selector?type=styles&index=0!./popup.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.6.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.6.0@vue-loader/lib/selector?type=script&index=0!./popup.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.6.0@vue-loader/lib/selector?type=script&index=0!./popup.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.6.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f438767c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.6.0@vue-loader/lib/selector?type=template&index=0!./popup.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f438767c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/popup.vue\n// module id = null\n// module chunks = ","<template>\r\n    <popup :coverClickHide=\"coverClickHide\" :width=\"width\" @coverClick=\"close\" ref=\"popup\">\r\n        <div class=\"wrapper\">\r\n            <div class=\"header\">\r\n                <h3 class=\"popup-title\">{{info.title}}</h3>\r\n                <i class=\"iconfont close-btn\" @click=\"close\">&#xe624;</i>\r\n            </div>\r\n            <form class=\"form\" ref=\"form\">\r\n                <input :type=\"item.type\" :placeholder=\"item.placeholder\" :name=\"item.name\" v-for=\"item in info.input\">\r\n                <span class=\"submit-btn\" @click=\"submitChecked\">{{info.submitText}}</span>\r\n            </form>\r\n            <p class=\"tipsinfo\" v-show=\"tipsinfo\">{{tipsinfo}}</p>\r\n            <div class=\"signup-tip\" v-if=\"currentType === 'signin'\">\r\n                <span class=\"text\">没有账号&nbsp;?</span>\r\n                <span class=\"signup-btn\" @click=\"toggleType\">注册</span>\r\n            </div>\r\n            <div class=\"signin-tip\" v-else>\r\n                <span class=\"signin-btn\" @click=\"toggleType\">已有账号登录</span>\r\n            </div>\r\n            <div class=\"signin-other\">\r\n                <span>第三方账号登录</span>\r\n                <i class=\"iconfont github\" @click=\"_githubLogin\">&#xe625;</i>\r\n            </div>\r\n        </div>\r\n    </popup>\r\n</template>\r\n\r\n<script>\r\n    import {mapMutations, mapActions} from 'vuex'\r\n    import popup from '../../base/popup.vue'\r\n    import {trim, ERR_OK} from '../../common/js/util'\r\n    import {submit, githubLogin} from '../../api/sign'\r\n\r\n    export default {\r\n        name: 'formPopup',\r\n        props: {\r\n            type: {\r\n                type: String,\r\n                default: 'signin'\r\n            },\r\n            state: {\r\n                type: Boolean,\r\n                default: true\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                coverClickHide: true, // 点击关闭时是否关闭弹窗\r\n                currentType: '',\r\n                width: '85%',\r\n                signin: {\r\n                    title: '登录',\r\n                    input: [{\r\n                        type: 'text',\r\n                        placeholder: '请输入用户名',\r\n                        name: 'name'\r\n                    },{\r\n                        type: 'password',\r\n                        placeholder: '请输入密码',\r\n                        name: 'password'\r\n                    }],\r\n                    submitText: '登录',\r\n                },\r\n                signup: {\r\n                    title: '注册',\r\n                    input: [{\r\n                        type: 'text',\r\n                        placeholder: '请输入用户名',\r\n                        name: 'name'\r\n                    },{\r\n                        type: 'password',\r\n                        placeholder: '请输入密码',\r\n                        name: 'password'\r\n                    },{\r\n                        type: 'password',\r\n                        placeholder: '请再次输入密码',\r\n                        name: 'repassword'\r\n                    }],\r\n                    submitText: '注册',\r\n                },\r\n                tipsinfo: '',\r\n            }\r\n        },\r\n        created() {\r\n            this.currentType = this.type\r\n        },\r\n        mounted() {\r\n            this.popup = this.$refs.popup // 弹窗组件\r\n            this.form = this.$refs.form // form表单\r\n\r\n            this.state && this.popup.show()\r\n        },\r\n        methods: {\r\n            submitChecked() {\r\n                let form = this.form\r\n                let name = trim(form.name.value)\r\n                let password = trim(form.password.value)\r\n                let repassword\r\n\r\n                if (name.length < 1 || name.length > 10) {\r\n                    return this.tipsinfo = '名字请限制在 1-10 个字符'\r\n                }\r\n\r\n                if (password.length < 6) {\r\n                    return this.tipsinfo = '密码至少 6 个字符'\r\n                }\r\n\r\n                if (this.currentType !== 'signin') {\r\n                    repassword = trim(form.repassword.value)\r\n                    if (password !== repassword) {\r\n                        return this.tipsinfo = '两次输入密码不一致'\r\n                    }\r\n                }\r\n                this.tipsinfo = '' // 重置\r\n\r\n                this._submit(name, password, repassword)\r\n            },\r\n            _submit(name, password, repassword) {\r\n                // 点击关闭按钮或背景不隐藏弹窗\r\n                this.coverClickHide = false\r\n\r\n                submit(name, password, repassword, this.currentType)\r\n                    .then(({data}) => {\r\n                        this.coverClickHide = true\r\n\r\n                        if (data.code === ERR_OK) {\r\n                            if (this.currentType === 'signin') {\r\n                                let redirect = this.$route.query.redirect\r\n                                if (redirect) {\r\n                                    this.saveUserInfo({user: data.data, loginState: true})\r\n                                    this.$router.push(redirect)\r\n                                } else {\r\n                                    this.close()\r\n                                    // 刷新页面\r\n                                    window.location.reload()\r\n                                }\r\n                            } else {\r\n                                this.currentType = 'signin'\r\n                            }\r\n                        } else {\r\n                            data.msg && (this.tipsinfo = data.msg)\r\n                        }\r\n                    })\r\n                    .catch((err) => {\r\n                        this.coverClickHide = true\r\n                        console.log(err)\r\n                    })\r\n            },\r\n            toggleType() {\r\n                this.currentType = this.currentType === 'signin' ? 'signup' : 'signin'\r\n            },\r\n            _githubLogin() {\r\n                let redirect = this.$route.query.redirect\r\n                githubLogin(redirect)\r\n            },\r\n            close() {\r\n                this.coverClickHide && this.setSignPopup()\r\n            },\r\n            ...mapMutations({\r\n                setSignPopup: 'SET_SIGN_POPUP'\r\n            }),\r\n            ...mapActions([\r\n                'saveUserInfo'\r\n            ])\r\n        },\r\n        computed: {\r\n            info() {\r\n                if (this.currentType === 'signin') {\r\n                    return this.signin\r\n                }\r\n                return this.signup\r\n            }\r\n        },\r\n        components: {\r\n            popup\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n    .wrapper\r\n        padding 0 15px\r\n        .header\r\n            display flex\r\n            align-items center\r\n            justify-content space-between\r\n            margin-bottom 15px\r\n            .popup-title\r\n                color #333\r\n                font-size 18px\r\n            .close-btn\r\n                font-size 14px\r\n                color #999999\r\n        .form\r\n            input\r\n                width 100%\r\n                height 35px\r\n                box-sizing border-box\r\n                padding 0 10px\r\n                border-radius 5px\r\n                color #333333\r\n                font-size 14px\r\n                margin-bottom 15px\r\n                box-shadow 0 0 1px #999999\r\n                outline none\r\n                border 1px solid #eeeeee\r\n            .submit-btn\r\n                color #ffffff\r\n                font-size 14px\r\n                border-radius 5px\r\n                display inline-block\r\n                width 100%\r\n                padding 10px 0\r\n                background-color #007fff\r\n                margin-bottom 15px\r\n        .tipsinfo\r\n            color red\r\n            font-size 12px\r\n            margin-bottom 15px\r\n        .signup-tip\r\n            font-size 14px\r\n            margin-bottom 15px\r\n            text-align left\r\n            .text\r\n                color #999999\r\n                margin-right 5px\r\n            .signup-btn\r\n                color #007fff\r\n        .signin-tip\r\n            font-size 14px\r\n            margin-bottom 15px\r\n            .signin-btn\r\n                color #007fff\r\n        .signin-other\r\n            font-size 14px\r\n            color #999999\r\n            text-align left\r\n            margin-bottom 15px\r\n            display flex\r\n            align-items center\r\n            .github\r\n                color #cccccc\r\n                font-size 20px\r\n            span\r\n                margin-right 15px\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/formPopup/formPopup.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('popup',{ref:\"popup\",attrs:{\"coverClickHide\":_vm.coverClickHide,\"width\":_vm.width},on:{\"coverClick\":_vm.close}},[_c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"header\"},[_c('h3',{staticClass:\"popup-title\"},[_vm._v(_vm._s(_vm.info.title))]),_vm._v(\" \"),_c('i',{staticClass:\"iconfont close-btn\",on:{\"click\":_vm.close}},[_vm._v(\"\")])]),_vm._v(\" \"),_c('form',{ref:\"form\",staticClass:\"form\"},[_vm._l((_vm.info.input),function(item){return _c('input',{attrs:{\"type\":item.type,\"placeholder\":item.placeholder,\"name\":item.name}})}),_vm._v(\" \"),_c('span',{staticClass:\"submit-btn\",on:{\"click\":_vm.submitChecked}},[_vm._v(_vm._s(_vm.info.submitText))])],2),_vm._v(\" \"),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tipsinfo),expression:\"tipsinfo\"}],staticClass:\"tipsinfo\"},[_vm._v(_vm._s(_vm.tipsinfo))]),_vm._v(\" \"),(_vm.currentType === 'signin')?_c('div',{staticClass:\"signup-tip\"},[_c('span',{staticClass:\"text\"},[_vm._v(\"没有账号 ?\")]),_vm._v(\" \"),_c('span',{staticClass:\"signup-btn\",on:{\"click\":_vm.toggleType}},[_vm._v(\"注册\")])]):_c('div',{staticClass:\"signin-tip\"},[_c('span',{staticClass:\"signin-btn\",on:{\"click\":_vm.toggleType}},[_vm._v(\"已有账号登录\")])]),_vm._v(\" \"),_c('div',{staticClass:\"signin-other\"},[_c('span',[_vm._v(\"第三方账号登录\")]),_vm._v(\" \"),_c('i',{staticClass:\"iconfont github\",on:{\"click\":_vm._githubLogin}},[_vm._v(\"\")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.6.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-d6bad25a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.6.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/formPopup/formPopup.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.6.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d6bad25a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.6.0@vue-loader/lib/selector?type=styles&index=0!./formPopup.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.6.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.6.0@vue-loader/lib/selector?type=script&index=0!./formPopup.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.6.0@vue-loader/lib/selector?type=script&index=0!./formPopup.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.6.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d6bad25a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.6.0@vue-loader/lib/selector?type=template&index=0!./formPopup.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d6bad25a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/formPopup/formPopup.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div id=\"app\" @click.capture=\"shouldCheckLoigin\">\r\n        <div>\r\n            <router-view name=\"header\" />\r\n            <keep-alive>\r\n                <router-view/>\r\n            </keep-alive>\r\n            <router-view name=\"footer\" />\r\n            <form-popup v-if=\"!isLogin && showSignPopup\" :type=\"signType\"></form-popup>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {mapGetters, mapMutations, mapActions} from 'vuex'\r\n    import formPopup from './components/formPopup/formPopup.vue'\r\n    import {getUserInfo} from './api/user'\r\n    import {ERR_OK, queryByKey} from './common/js/util'\r\n\r\n    export default {\r\n        name: 'app',\r\n        computed: {\r\n            ...mapGetters([\r\n                'isLogin',\r\n                'showSignPopup',\r\n                'signType',\r\n                'isPopState'\r\n            ])\r\n        },\r\n        components: {\r\n            formPopup\r\n        },\r\n        created() {\r\n            this._getUserInfo()\r\n            this.redirect()\r\n        },\r\n        methods: {\r\n            redirect() {\r\n                let redirect = queryByKey('redirect')\r\n                redirect && this.$router.push(decodeURIComponent(redirect))\r\n            },\r\n            shouldCheckLoigin(e) { // 全局的检查页面中需要登录才能执行的操作，如关注、收藏、评论等\r\n                let shouldLogin = e.target.getAttribute('data-shouldLogin') === 'true'\r\n                if (shouldLogin && !this.isLogin) {\r\n                    // 弹窗并阻止事件传播\r\n                    this.setSignPopup('signin')\r\n                    e.stopPropagation()\r\n                }\r\n            },\r\n            _getUserInfo() {\r\n                this.isLogin && getUserInfo()\r\n                    .then(({data}) => {\r\n                        if (data.code === ERR_OK) {\r\n                            this.setUserInfo(data.data)\r\n                        }\r\n                    })\r\n                    .catch(console.log)\r\n            },\r\n            ...mapMutations({\r\n                setUserInfo: 'SET_USER_INFO',\r\n                setPopState: 'SET_POP_STATE'\r\n            }),\r\n            ...mapActions([\r\n                'setSignPopup'\r\n            ])\r\n        },\r\n        watch: {\r\n            '$route'() {\r\n                if (this.isPopState) {\r\n                    // 在同步代码后执行，即组件的activated后面，等待activated判断完成，重置isPopState\r\n                    setTimeout(() => {\r\n                        this.setPopState(false)\r\n                    }, 0)\r\n                    return\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n    #app\r\n        font-family: 'Avenir', Helvetica, Arial, sans-serif\r\n        -webkit-font-smoothing: antialiased\r\n        -moz-osx-font-smoothing: grayscale\r\n        color: #2c3e50\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"},on:{\"!click\":function($event){_vm.shouldCheckLoigin($event)}}},[_c('div',[_c('router-view',{attrs:{\"name\":\"header\"}}),_vm._v(\" \"),_c('keep-alive',[_c('router-view')],1),_vm._v(\" \"),_c('router-view',{attrs:{\"name\":\"footer\"}}),_vm._v(\" \"),(!_vm.isLogin && _vm.showSignPopup)?_c('form-popup',{attrs:{\"type\":_vm.signType}}):_vm._e()],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.6.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-4af8f3c6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.6.0@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.6.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4af8f3c6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.6.0@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/_vue-loader@13.6.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/_vue-loader@13.6.0@vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/_vue-loader@13.6.0@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/_vue-loader@13.6.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4af8f3c6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@13.6.0@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport store from '../store'\r\n\r\nconst Home = () => import('../components/home/home')\r\nconst CommonHeader = () => import('../components/header/commonHeader')\r\nconst FooterMenu = () => import('../components/footerMenu/footerMenu')\r\nconst PostEdit = () => import('../components/post/postEdit')\r\nconst PostView = () => import('../components/post/pageView')\r\nconst Comment = () => import('../components/comment/comment')\r\nconst User = () => import('../components/user/user')\r\nconst Category = () => import('../components/category/category')\r\nconst UserPost = () => import('../components/user/userPost')\r\nconst PostHistory = () => import('../components/user/postHistory')\r\nconst Collection = () => import('../components/user/collection')\r\nconst FollowAuthor = () => import('../components/user/followAuthor')\r\nconst CategoryPost = () => import('../components/category/categoryPost')\r\nconst Edit = () => import('../components/user/edit')\r\n\r\nVue.use(Router)\r\n\r\n// 检测浏览器的前进后退，判断是否需要重新获取数据，false要获取，true不需要\r\nwindow.addEventListener('popstate', () => {\r\n    store.commit('SET_POP_STATE', true)\r\n})\r\n\r\nconst router =  new Router({\r\n    mode: 'history',\r\n    scrollBehavior(to, from, savedPosition) {\r\n        if (savedPosition) {\r\n            return savedPosition\r\n        } else {\r\n            return { x: 0, y: 0 }\r\n        }\r\n    },\r\n    routes: [\r\n        {\r\n            path: '/',\r\n            name: 'home',\r\n            components: {\r\n                default: Home,\r\n                header: CommonHeader,\r\n                footer: FooterMenu\r\n            }\r\n        },\r\n        {\r\n            path: '/post/create',\r\n            name: 'postCreate',\r\n            components: {\r\n                default: PostEdit,\r\n                header: CommonHeader\r\n            },\r\n            meta: {shouldLogin: true}\r\n        },\r\n        {\r\n            path: '/post/:postId/update',\r\n            name: 'postUpdate',\r\n            components: {\r\n                default: PostEdit,\r\n                header: CommonHeader\r\n            },\r\n            meta: {shouldLogin: true}\r\n        },\r\n        {\r\n            path: '/post/:postId',\r\n            name: 'postView',\r\n            components: {\r\n                default: PostView,\r\n                header: CommonHeader\r\n            }\r\n        },\r\n        {\r\n            path: '/post/:postId/comment/:commentId',\r\n            name: 'comment',\r\n            components: {\r\n                default: Comment,\r\n                header: CommonHeader\r\n            }\r\n        },\r\n        {\r\n            path: '/category',\r\n            name: 'category',\r\n            components: {\r\n                default: Category,\r\n                footer: FooterMenu\r\n            }\r\n        },\r\n        {\r\n            path: '/category/:category',\r\n            name: 'categoryPost',\r\n            component: CategoryPost\r\n        },\r\n        {\r\n            path: '/category/:category/post/:postId',\r\n            name: 'categoryPostView',\r\n            components: {\r\n                default: PostView,\r\n                header: CommonHeader\r\n            }\r\n        },\r\n        {\r\n            path: '/user',\r\n            name: 'user',\r\n            components: {\r\n                default: User,\r\n                footer: FooterMenu\r\n            }\r\n        },\r\n        {\r\n            path: '/user/post',\r\n            name: 'userPost',\r\n            component: UserPost,\r\n            meta: {shouldLogin: true}\r\n        },\r\n        {\r\n            path: '/user/history',\r\n            name: 'postHistory',\r\n            component: PostHistory,\r\n            meta: {shouldLogin: true}\r\n        },\r\n        {\r\n            path: '/user/collection',\r\n            name: 'collection',\r\n            component: Collection,\r\n            meta: {shouldLogin: true}\r\n        },\r\n        {\r\n            path: '/user/follow',\r\n            name: 'followAuthor',\r\n            component: FollowAuthor,\r\n            meta: {shouldLogin: true}\r\n        },\r\n        {\r\n            path: '/user/followAuthor/:followAuthor',\r\n            name: 'followAuthorPost',\r\n            component: UserPost,\r\n            meta: {shouldLogin: true}\r\n        },\r\n        {\r\n            path: '/user/edit',\r\n            name: 'edit',\r\n            component: Edit,\r\n            meta: {shouldLogin: true}\r\n        },\r\n        {\r\n            path: '*',\r\n            redirect: '/'\r\n        }\r\n    ]\r\n})\r\n\r\n// 全局的页面级别的登录状态判断\r\nrouter.beforeEach((to, from, next) => {\r\n    let shouldLogin = to.meta.shouldLogin\r\n    let isLogin = store.getters.isLogin\r\n\r\n    if (shouldLogin && !isLogin) {\r\n        store.dispatch('setSignPopup', 'signin')\r\n        next({\r\n            path: from.fullPath,\r\n            query: {redirect: to.fullPath}\r\n        })\r\n    } else {\r\n        next()\r\n    }\r\n})\r\n\r\nexport default router\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport store from './store'\n\nimport './common/stylus/index.styl'\n\nVue.config.productionTip = false\n\nVue.mixin({\n    data() {\n        return {\n            intoPageCount: 0, // 判断是否是首次进入页面，是则跳过activated\n        }\n    }\n})\n\nPromise.prototype.finally = function(callback) {\n    let P = this.constructor\n    return this.then(\n        value  => P.resolve(callback()).then(() => value),\n        reason => P.resolve(callback()).then(() => { throw reason })\n    )\n}\n\n/* eslint-disable no-new */\nnew Vue({\n    el: '#app',\n    router,\n    store,\n    template: '<App/>',\n    components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import axios from '../common/js/axios'\r\nimport {isDev} from '../common/js/util'\r\n\r\n// 登录或注册\r\nexport function submit(name, password, repassword, type = 'signin') {\r\n    if (type === 'signin') {\r\n        let data = {\r\n            name,\r\n            password\r\n        }\r\n\r\n        return axios.post('signin', data)\r\n    } else {\r\n        let data = {\r\n            name,\r\n            password,\r\n            repassword\r\n        }\r\n\r\n        return axios.post('signup', data)\r\n    }\r\n}\r\n\r\nexport function githubLogin(redirect) {\r\n    let url = isDev ? 'http://localhost:3000/api/signin/github' : '/api/signin/github'\r\n    url = redirect ? `${url}?redirect=${redirect}` : url\r\n    window.location.href = url\r\n}\r\n\r\n// 登出\r\nexport function signout() {\r\n    return axios.get('signout')\r\n}\r\n\r\nexport function getUserInfo() {\r\n    return axios.post('user/getUserInfo')\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/sign.js","// 开发、生产环境判断\r\nexport const isDev = process.env.NODE_ENV === 'development'\r\n\r\nexport const ERR_OK = 0\r\n\r\nexport const unLogin = -2\r\n\r\nexport function trim(str) {\r\n    return str.replace(/(^\\s*)|(\\s*$)/g, \"\")\r\n}\r\n\r\nexport function queryStr(data) {\r\n    let str = ''\r\n    for (let key in data) {\r\n        str += `&${key}=${encodeURIComponent(data[key])}`\r\n    }\r\n    return str.substr(1)\r\n}\r\n\r\nexport function queryByKey(key){\r\n    let result = window.location.search.match(new RegExp(key + \"=[^\\?\\&]+\", \"g\"))\r\n    let value = result ? result[0].split('=')[1] : ''\r\n    return decodeURIComponent(value)\r\n}\r\n\r\nconst timeFormatArr = [0, 60, 3600, 86400, 2592000, 946080000, Number.MAX_VALUE]\r\nconst timeUnit = ['刚刚', '分钟前', '小时前', '天前', '月前', '年前']\r\n\r\nexport function timeFormat(dateStr) {\r\n    let dateTime = new Date(dateStr).getTime()\r\n    let now = new Date().getTime()\r\n    let time = (now - dateTime) / 1000\r\n\r\n    let index = timeFormatArr.findIndex((item, index) => {\r\n        return item <= time && timeFormatArr[index + 1] > time\r\n    })\r\n\r\n    if (index === 0) {\r\n        return timeUnit[0]\r\n    }\r\n\r\n    time = time / timeFormatArr[index] | 0\r\n    return time + timeUnit[index]\r\n}\r\n\r\nexport function format(fmt, date = new Date()) {\r\n    const o = {\r\n        \"M+\": date.getMonth() + 1, //月份\r\n        \"d+\": date.getDate(), //日\r\n        \"h+\": date.getHours(), //小时\r\n        \"m+\": date.getMinutes(), //分\r\n        \"s+\": date.getSeconds(), //秒\r\n        \"q+\": Math.floor((date.getMonth() + 3) / 3), //季度\r\n        \"S\": date.getMilliseconds() //毫秒\r\n    };\r\n    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (date.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n    for (let k in o)\r\n    if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n    return fmt;\r\n}\r\n\r\nexport function debounce(fn, time = 100, context) {\r\n    let timer\r\n    return function(...args) {\r\n        clearTimeout(timer)\r\n\r\n        timer = setTimeout(() => {\r\n            context = context || this\r\n            fn.apply(context, ...args)\r\n        }, time)\r\n    }\r\n}\r\n\r\nexport function checkScrollToBottom(delay = 50) {\r\n    let windowH = window.innerHeight\r\n    let docH = document.documentElement.scrollHeight || document.body.scrollHeight\r\n    let scrollTop = document.documentElement.scrollTop || document.body.scrollTop\r\n\r\n    if (windowH + scrollTop >= docH - delay) {\r\n        return true\r\n    }\r\n    return false\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/util.js","import axios from 'axios'\r\nimport store from '../../store'\r\nimport {isDev, unLogin} from './util'\r\n\r\n// 开发环境设置跨域并传输cookie\r\nif (isDev) {\r\n    axios.defaults.baseURL = 'http://localhost:3000/api'\r\n    axios.defaults.withCredentials = true\r\n} else {\r\n    axios.defaults.baseURL = '/api'\r\n}\r\n\r\naxios.defaults.headers.post['Content-Type'] = 'appliction/x-www-form-urlencoded'\r\n\r\n//添加一个返回拦截器\r\naxios.interceptors.response.use(function(response) {\r\n    //对返回的数据进行一些处理\r\n    if (response.data.code === unLogin) {\r\n        // 登录状态下手动清除cookie,更新用户信息并弹出登录弹窗\r\n        if (store.getters.isLogin) {\r\n            store.dispatch('saveUserInfo', {user: null, loginState: false})\r\n            store.dispatch('setSignPopup', 'signin')\r\n        }\r\n    }\r\n    return response\r\n}, function(error) {\r\n    //对返回的错误进行一些处理\r\n    return Promise.reject(error)\r\n})\r\n\r\nexport default axios\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/axios.js","import axios from '../common/js/axios'\n\nexport function getUserInfo() {\n    return axios.post('user/getUserInfo')\n}\n\nexport function editUserInfo(userInfo) {\n    return axios.post('user/edit', userInfo, {\n        headers: {\n            'Content-Type': 'appliction/x-www-form-urlencoded'\n        }\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/user.js"],"sourceRoot":""}